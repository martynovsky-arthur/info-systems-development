<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flask Project</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div align = center>
    <br><br>
    <a href = "{{url_for('bp_basket.save_order')}}">Оформить заказ</a><br><br>
    <a href = "{{url_for('main_menu')}}">Вернуться в меню пользователя</a>
</div>

{% import 'basket_utils.html' as utils %}

<div class="container">
    <div class="row">
    <div class="col-md-8">
        <h2>Все товары для покупки</h2>
        {% if items %}
        {% for item in items %}
         {{ utils.render_item(item, show_form = True, show_amount = False) }}
        {% endfor %}
        {% else %}
            <p>Нет доступных товаров</p>
        {% endif %}
    </div>
    <div class="col-md-4">
        <h2 style="color:blue">Ваша корзина</h2>
        <a style="color:green" href="{{url_for('bp_basket.clear_basket')}}">Очистить корзину</a>
        {% if basket %}
        {% for key in basket %}
            {{ utils.render_item(basket[key], show_form=False, show_amount=True)}}
        {% endfor %}
        <div style="border: 1px solid black; padding: 10px; margin-top: 10px;">
            <h4>Общая сумма: {{ "%.2f"|format(total_price) }} руб.</h4>
        </div>
        {% else %}
            <p>Ваша корзина пуста</p>
        {% endif %}
    </div>
    </div>
</div>
</body>
</html>
